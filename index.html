<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Admin Panel — UID Approvals</title>
<style>
:root {
  --accent:#0b84ff;
  --bg:#071127;
  --muted:rgba(255,255,255,0.08);
}
body {
  background:var(--bg);
  color:white;
  font-family:Inter, sans-serif;
  padding:40px;
}
h1 {
  text-align:center;
  color:var(--accent);
  font-size:28px;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:25px;
  background:#0c1633;
  border-radius:10px;
  overflow:hidden;
}
th, td {
  border-bottom:1px solid var(--muted);
  padding:14px;
  text-align:center;
}
th {
  background:#0f1c44;
  font-weight:600;
}
button {
  padding:6px 12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-size:14px;
}
.approve {background:#00c851;color:white;}
.reject {background:#ff4444;color:white;}
.delete {background:#444;color:white;}
</style>
</head>
<body>
<h1>Admin Panel — UID Approvals</h1>

<table>
  <thead>
    <tr>
      <th>UID</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody id="uidTable"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getDatabase, ref, onValue, update, remove } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBdcYuIyTk2qNvabTW15fZoWwzrKpXveu4",
  authDomain: "king-predictor-a24e6.firebaseapp.com",
  databaseURL: "https://king-predictor-a24e6-default-rtdb.firebaseio.com",
  projectId: "king-predictor-a24e6",
  storageBucket: "king-predictor-a24e6.firebasestorage.app",
  messagingSenderId: "156995492169",
  appId: "1:156995492169:web:e327c7b36706550bb3a298"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const uidTable = document.getElementById('uidTable');

onValue(ref(db, 'uids/'), (snapshot) => {
  const data = snapshot.val();
  uidTable.innerHTML = "";
  if (!data) return;

  Object.keys(data).forEach(key => {
    const item = data[key];
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${item.uid}</td>
      <td>${item.status}</td>
      <td>
        <button class="approve">Approve</button>
        <button class="reject">Reject</button>
        <button class="delete">Delete</button>
      </td>
    `;
    row.querySelector('.approve').onclick = () => {
      update(ref(db, 'uids/' + key), { status: 'approved' });
    };
    row.querySelector('.reject').onclick = () => {
      update(ref(db, 'uids/' + key), { status: 'rejected' });
    };
    row.querySelector('.delete').onclick = () => {
      remove(ref(db, 'uids/' + key));
    };
    uidTable.appendChild(row);
  });
});
</script>
</body>
</html>
